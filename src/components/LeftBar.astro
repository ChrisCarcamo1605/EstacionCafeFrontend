---
import "../styles/style.css";

interface Props {
  options?: string[];
  title: string;
  selectedOption?: string;
  returnPath?: string;
  routeMap?: Record<string, string>;
}

const { options = [], title, selectedOption = "" , returnPath="/administracion", routeMap = {} } = Astro.props;
---

<div
  class="siderbar_left d-flex align-items-center flex-column border-end pt-3 px-3 z-2 vh-100"
>
  <div class="w-100 d-flex flex-row align-items-left">
    <a href={returnPath}>
      <button
        class="btn btn-link text-dark text-decoration-none p-0 align-items-center d-flex flex-row"
      >
        <div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
          >
            <path
              fill="currentColor"
              d="m4 10l-.707.707L2.586 10l.707-.707zm17 8a1 1 0 1 1-2 0zM8.293 15.707l-5-5l1.414-1.414l5 5zm-5-6.414l5-5l1.414 1.414l-5 5zM4 9h10v2H4zm17 7v2h-2v-2zm-7-7a7 7 0 0 1 7 7h-2a5 5 0 0 0-5-5z"
            ></path>
          </svg>
        </div>
        <span class="ms-2 fw-medium" style="font-size: 1.1rem;">Volver</span>
      </button>
    </a>
  </div>

  <div class="mt-5 align-items-center">
    <h2 class="text-center pattaya_subtitle">{title}</h2>

    <div class="d-flex pt-4 flex-column gap-3 align-items-center" id="leftbar-options">
      {
        options && options.length > 0 ? (
          options.map((option: string) => (
            <div 
              class={`sidebar_option ${selectedOption === option ? 'sidebar_option_selected' : ''}`}
              data-option={option}
              data-route={routeMap[option] || ''}
            >
              <span>{option}</span>
            </div>
          ))
        ) : (
          <span>No hay opciones disponibles</span>
        )
      }
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const options = document.querySelectorAll<HTMLElement>('.sidebar_option[data-route]');
    
    options.forEach(option => {
      const route = option.getAttribute('data-route');
      
      if (route && route !== '') {
        option.style.cursor = 'pointer';
        
        option.addEventListener('click', () => {
          window.location.href = route;
        });
        
        option.addEventListener('mouseenter', () => {
          if (!option.classList.contains('sidebar_option_selected')) {
            option.style.transform = 'scale(1.02)';
          }
        });
        
        option.addEventListener('mouseleave', () => {
          option.style.transform = 'scale(1)';
        });
      }
    });
  });
</script>

<style>
  .sidebar_option {
    transition: all 0.2s ease;
  }
  
  .sidebar_option[data-route]:not(.sidebar_option_selected):hover {
    background-color: rgba(72, 46, 33, 0.1);
  }
  
  .sidebar_option_selected {
    background-color: #482E21;
    color: white;
  }
  
  .sidebar_option_selected span {
    color: white;
  }
</style>
